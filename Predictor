local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local PetLists = {
	["Common Egg"] = { "Dog", "Golden Lab", "Bunny" },
	["Mythical Egg"] = { "Grey Mouse", "Brown Mouse", "Squirrel", "Red Giant Ant", "Red Fox" },
	["Bug Egg"] = { "Caterpillar", "Snail", "Giant Ant", "Praying Mantis", "Dragonfly" },
	["Common Summer Egg"] = { "Starfish", "Seagull", "Crab" },
	["Rare Summer Egg"] = { "Flamingo", "Toucan", "Sea Turtle", "Orangutan", "Seal" },
	["Paradise Egg"] = { "Ostrich", "Peacock", "Capybara", "Scarlet Macaw", "Mimic Octopus" },
	["Bee Egg"] = { "Bee", "Honey Bee", "Bear Bee", "Petal Bee", "Queen Bee" },
	["Oasis Egg"] = { "Meerkat", "Sand Snake", "Axolotl", "Hyacinth Macaw", "Fennec Fox" },
	["Anti Bee Egg"] = { "Wasp", "Tarantula Hawk", "Moth", "Butterfly", "Disco Bee" },
	["Night Egg"] = { "Frog", "Mole", "Hedgehog", "Raccoon", "Night Owl", "Echo Frog" },
	["Dinosaur Egg"] = { "Raptor", "Triceratops", "Stegosaurus", "Pterodactyl", "Brontosaurus", "T-Rex" }
}

local rggJackpotPets = {
	["Raccoon"] = true, ["Red Fox"] = true, ["Dragonfly"] = true, ["Mimic Octopus"] = true,
	["Queen Bee"] = true, ["Fennec Fox"] = true, ["Butterfly"] = true, ["Disco Bee"] = true, ["T-Rex"] = true
}

local cooldownTime = 30
local shuffleCooldown = false
local currentCountdown = 0
local gui, timerLabel

local function getRandomPet(list)
	return list[math.random(1, #list)]
end

local function tagEgg(part, eggName)
	if part:FindFirstChild("EggLabel") then return end
	local bb = Instance.new("BillboardGui", part)
	bb.Name = "EggLabel"
	bb.Adornee = part
	bb.Size = UDim2.new(0, 140, 0, 90)
	bb.StudsOffset = Vector3.new(0, 3.5, 0)
	bb.AlwaysOnTop = true

	local eggText = Instance.new("TextLabel", bb)
	eggText.Size = UDim2.new(1, 0, 0.33, 0)
	eggText.Position = UDim2.new(0, 0, 0, 0)
	eggText.BackgroundTransparency = 1
	eggText.TextScaled = true
	eggText.TextColor3 = Color3.fromRGB(70, 255, 70)
	eggText.Font = Enum.Font.FredokaOne
	eggText.Text = "ü•ö " .. eggName

	if PetLists[eggName] then
		local petText = Instance.new("TextLabel", bb)
		petText.Name = "PetLabel"
		petText.Size = UDim2.new(1, 0, 0.33, 0)
		petText.Position = UDim2.new(0, 0, 0.33, 0)
		petText.BackgroundTransparency = 1
		petText.TextScaled = true
		petText.TextColor3 = Color3.fromRGB(255, 255, 255)
		petText.Font = Enum.Font.GothamBold
		petText.Text = getRandomPet(PetLists[eggName])
	end
end

local function scanEggs()
	for _, obj in ipairs(Workspace:GetDescendants()) do
		if PetLists[obj.Name] then
			local part = obj:IsA("Model") and obj:FindFirstChildWhichIsA("BasePart") or obj
			if part then
				tagEgg(part, obj.Name)
			end
		end
	end
end

local function jackpotNotify()
	local label = Instance.new("TextLabel", PlayerGui)
	label.Size = UDim2.new(0, 320, 0, 50)
	label.Position = UDim2.new(0.5, -160, 0.4, -25)
	label.AnchorPoint = Vector2.new(0.5, 0.5)
	label.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
	label.TextColor3 = Color3.fromRGB(0, 0, 0)
	label.Font = Enum.Font.GothamBlack
	label.Text = "üéâ JACKPOT PET FOUND!"
	label.TextScaled = true
	Instance.new("UICorner", label).CornerRadius = UDim.new(0, 8)

	task.delay(2.5, function()
		label:Destroy()
	end)
end

local function startCooldown(button)
	if shuffleCooldown then return end
	shuffleCooldown = true
	currentCountdown = cooldownTime

	for _, obj in ipairs(Workspace:GetDescendants()) do
		if PetLists[obj.Name] then
			local part = obj:IsA("Model") and obj:FindFirstChildWhichIsA("BasePart") or obj
			if part then
				local gui = part:FindFirstChild("EggLabel")
				if gui and gui:FindFirstChild("PetLabel") then
					local newPet = getRandomPet(PetLists[obj.Name])
					gui.PetLabel.Text = newPet
					gui.PetLabel.TextColor3 = Color3.fromRGB(255, 255, 255)

					if rggJackpotPets[newPet] then
						task.spawn(function()
							while gui and gui:FindFirstChild("PetLabel") and shuffleCooldown do
								gui.PetLabel.TextColor3 = Color3.fromHSV(tick() % 5 / 5, 1, 1)
								task.wait(0.05)
							end
						end)
						jackpotNotify()
					end
				end
			end
		end
	end

	while currentCountdown > 0 do
		timerLabel.Text = "üïí " .. currentCountdown .. "s before next reshuffle"
		currentCountdown -= 1
		task.wait(1)
	end

	timerLabel.Text = "‚úÖ Ready to reshuffle pets"
	shuffleCooldown = false
end

local function createUI()
	gui = Instance.new("ScreenGui", PlayerGui)
	gui.Name = "GardenUI"

	local bgFrame = Instance.new("Frame", gui)
	bgFrame.Size = UDim2.new(0, 280, 0, 160)
	bgFrame.Position = UDim2.new(0, 30, 1, -200)
	bgFrame.BackgroundColor3 = Color3.fromRGB(50, 150, 90)
	Instance.new("UICorner", bgFrame).CornerRadius = UDim.new(0, 12)

	timerLabel = Instance.new("TextLabel", bgFrame)
	timerLabel.Size = UDim2.new(1, -20, 0, 40)
	timerLabel.Position = UDim2.new(0, 10, 0, 10)
	timerLabel.BackgroundTransparency = 1
	timerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	timerLabel.Font = Enum.Font.GothamBold
	timerLabel.TextScaled = true
	timerLabel.Text = "‚úÖ Ready to reshuffle pets"

	local button = Instance.new("TextButton", bgFrame)
	button.Size = UDim2.new(1, -40, 0, 45)
	button.Position = UDim2.new(0, 20, 0, 70)
	button.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	button.TextColor3 = Color3.fromRGB(0, 128, 70)
	button.Font = Enum.Font.GothamBold
	button.TextScaled = true
	button.Text = "üîÅ Shuffle Pets"
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 10)

	button.MouseButton1Click:Connect(function()
		startCooldown(button)
	end)
end

-- üå± Toggle UI button
local toggleUI = Instance.new("ScreenGui", PlayerGui)
toggleUI.Name = "GardenToggle"

local toggleBtn = Instance.new("TextButton", toggleUI)
toggleBtn.Size = UDim2.new(0, 130, 0, 40)
toggleBtn.Position = UDim2.new(1, -140, 0.5, -20)
toggleBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleBtn.Font = Enum.Font.GothamBlack
toggleBtn.TextScaled = true
toggleBtn.Text = "üåº Toggle Garden"
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(0, 10)

local active = false
toggleBtn.MouseButton1Click:Connect(function()
	active = not active
	if active then
		if not gui then createUI() end
		gui.Enabled = true
		if not _G._gardenScan then
			_G._gardenScan = RunService.Heartbeat:Connect(function()
				pcall(scanEggs)
			end)
		end
	else
		gui.Enabled = false
		if _G._gardenScan then
			_G._gardenScan:Disconnect()
			_G._gardenScan = nil
		end
	end
end)
